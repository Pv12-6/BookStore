<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sách Bán Chạy | TheBookstore</title>

  <!-- ===== CSS ===== -->
  <link rel="stylesheet" href="../css/header.css">
  <link rel="stylesheet" href="../css/footer.css">
  <link rel="stylesheet" href="../css/product.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- ===== JS CHUNG ===== -->
  <script src="../js/main.js" defer></script>
  <script src="../js/header.js" defer></script>
</head>

<body>
  <!-- HEADER KHI CHƯA LOGIN -->
    <header class="header">
        <a href="#" class="logo">
            <img src="../images/logo.png" alt="Bookstore Logo">
        </a>

        <nav class="navbar">
            <a href="index.html">Trang chủ</a>
            <a href="newbook.html">Sách mới</a>
            <a href="bestsaler.html">Bán chạy</a>
            <a href="voucher.html">Khuyến mãi</a>
            <a href="aboutus.html">Về chúng tôi</a>
            <a href="contact.html">Liên hệ</a>
        </nav>

        <div class="auth-buttons">
            <!-- icon tìm kiếm -->
            <div class="search-box">
  <input type="text" placeholder="Tìm kiếm sách..." id="search-input">
  <button id="search-btn"><i class="fa fa-search"></i></button>
</div>

<!-- Nơi hiển thị kết quả -->
<div id="search-results"></div>

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
            <a href="login.html" class="btn-login">Đăng nhập</a>
            <span>|</span>
            <a href="register.html" class="btn-register">Đăng ký</a>
        </div>
    </header>
    <!-- HEADER KHI CHƯA LOGIN END -->
       <!-- Header mini (ẩn lúc đầu) -->
  <div class="mini-header">
    <a href="index.html">Trang chủ</a>
    <a href="#newbooks">Sách mới</a>
    <a href="#bestsaler">Bán chạy</a>
    <a href="voucher.html">Khuyến mãi</a>
    <a href="#aboutus">Về chúng tôi</a>
    <a href="#contact">Liên hệ</a>
    <!-- icon tìm kiếm -->
            <div class="search-box mini-search-box">
  <input type="text" placeholder="Tìm kiếm sách..." id="mini-search-input">
  <button id="mini-search-btn"><i class="fa fa-search"></i></button>
</div>

<!-- Nơi hiển thị kết quả -->
<div id="search-results"></div>
    <a href="#"><i class="fas fa-user"></i></a>

    </div>
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!--Main content-->
  <!-- ===== MAIN ===== -->
  <main>
    <section class="book-section">
      <h2>Sách Bán Chạy</h2>
      <div id="book-list" class="book-list"></div>
       <div id="pagination" class="pagination"></div>
    </section>
  </main>

  <!-- ===== FOOTER ===== -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-column">
        <h3>The Bookstore</h3>
        <p>Đem tri thức đến gần bạn hơn mỗi ngày.</p>
        <p>© 2025 TheBookstore</p>
      </div>

      <div class="footer-column">
        <h3>Liên hệ</h3>
        <p>Email: <a href="mailto:sbookstore@gmail.com">sbookstore@gmail.com</a></p>
        <p>Hotline: 0869 953 312</p>
        <p>Địa chỉ: 123 Đường Sách, Quận 1, TP.HCM</p>
      </div>

      <div class="footer-column">
        <h3>Liên kết nhanh</h3>
          <ul>
            <li><a href="index.html">Trang chủ</a></li>
            <li><a href="bestsaler.html">Bán chạy</a></li>
            <li><a href="newbook.html">Sách mới</a></li>
            <li><a href="voucher.html">Khuyến mãi</a></li>
            <li><a href="aboutus.html">Về chúng tôi</a></li>
            <li><a href="contact.html">Liên hệ</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Kết nối</h3>
          <div class="social-icons">
            <ul>
              <li>Facebook</li>
              <li>Instagram</li>
              <li>Tikok</li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

  <!-- ===== SCRIPT KHỞI TẠO DỮ LIỆU ===== -->
  <script>
    // ===== DỮ LIỆU SÁCH BÁN CHẠY =====
    const SachBanChay = [
  // ===== Kỹ năng sống =====
  { title: "Đắc Nhân Tâm", author: "Dale Carnegie", category: "Kỹ năng sống", price: 75000, sale: 10, img: "../images/book1.jpg", desc: "Cuốn sách giúp bạn hiểu và giao tiếp hiệu quả hơn trong cuộc sống." },
  { title: "Quẳng Gánh Lo Đi Và Vui Sống", author: "Dale Carnegie", category: "Kỹ năng sống", price: 89000, sale: 15, img: "../images/book3.jpg", desc: "Bí quyết sống lạc quan, giảm căng thẳng và tận hưởng cuộc đời." },
  { title: "Tuổi Trẻ Đáng Giá Bao Nhiêu", author: "Rosie Nguyễn", category: "Phát triển bản thân", price: 88000, sale: 20, img: "../images/book7.jpg", desc: "Truyền cảm hứng sống hết mình cho tuổi trẻ." },
  { title: "7 Thói Quen Hiệu Quả", author: "Stephen Covey", category: "Phát triển bản thân", price: 130000, sale: 10, img: "../images/book8.jpg", desc: "Những thói quen giúp bạn thành công và hạnh phúc." },
  { title: "Dám Bị Ghét", author: "Ichiro Kishimi", category: "Tâm lý học", price: 115000, sale: 25, img: "../images/book9.jpg", desc: "Triết lý sống tự do và hạnh phúc theo tư tưởng Adler." },
  { title: "Tôi Tự Học", author: "Thu Giang Nguyễn Duy Cần", category: "Kỹ năng sống", price: 95000, sale: 10, img: "../images/book11.jpg", desc: "Phương pháp tự học để phát triển bản thân toàn diện." },
  { title: "Khéo Ăn Nói Sẽ Có Được Thiên Hạ", author: "Trác Nhã", category: "Kỹ năng sống", price: 105000, sale: 15, img: "../images/book12.jpg", desc: "Bí quyết giao tiếp thành công trong mọi tình huống." },

  // ===== Tiểu thuyết =====
  { title: "Nhà Giả Kim", author: "Paulo Coelho", category: "Tiểu thuyết", price: 120000, sale: 20, img: "../images/book2.jpg", desc: "Hành trình đi tìm kho báu và ước mơ của chàng chăn cừu Santiago." },
  { title: "Không Gia Đình", author: "Hector Malot", category: "Văn học kinh điển", price: 115000, sale: 10, img: "../images/book13.jpg", desc: "Câu chuyện cảm động về cậu bé Rémi mồ côi." },
  { title: "Hoàng Tử Bé", author: "Antoine de Saint-Exupéry", category: "Thiếu nhi", price: 78000, sale: 10, img: "../images/book14.jpg", desc: "Một trong những tác phẩm thiếu nhi triết lý sâu sắc nhất mọi thời." },
  { title: "Bố Già", author: "Mario Puzo", category: "Tiểu thuyết", price: 175000, sale: 15, img: "../images/book15.jpg", desc: "Câu chuyện về gia tộc mafia Corleone lừng danh." },
  { title: "Tôi Thấy Hoa Vàng Trên Cỏ Xanh", author: "Nguyễn Nhật Ánh", category: "Văn học Việt Nam", price: 98000, sale: 10, img: "../images/book16.jpg", desc: "Một bức tranh tuổi thơ trong sáng và đầy cảm xúc." },
  { title: "Cô Gái Đến Từ Hôm Qua", author: "Nguyễn Nhật Ánh", category: "Văn học Việt Nam", price: 88000, sale: 10, img: "../images/book17.jpg", desc: "Chuyện tình học trò nhẹ nhàng, đầy hoài niệm." },
  { title: "Harry Potter Và Hòn Đá Phù Thủy", author: "J.K. Rowling", category: "Fantasy", price: 160000, sale: 15, img: "../images/book18.jpg", desc: "Phần mở đầu series huyền thoại Harry Potter." },
  { title: "Harry Potter Và Phòng Chứa Bí Mật", author: "J.K. Rowling", category: "Fantasy", price: 160000, sale: 10, img: "../images/book19.jpg", desc: "Những bí ẩn tại Hogwarts được hé mở qua từng chương." },

  // ===== Kinh tế / Kinh doanh =====
  { title: "Cha Giàu Cha Nghèo", author: "Robert Kiyosaki", category: "Kinh doanh", price: 150000, sale: 20, img: "../images/book20.jpg", desc: "Tư duy tài chính và cách tạo dựng sự giàu có." },
  { title: "Tư Duy Nhanh Và Chậm", author: "Daniel Kahneman", category: "Kinh tế học hành vi", price: 210000, sale: 15, img: "../images/book10.jpg", desc: "Khám phá hai hệ thống tư duy và cách con người ra quyết định." },
  { title: "Người Dám Cho Đi", author: "Bob Burg", category: "Kinh doanh", price: 95000, sale: 10, img: "../images/book5.jpg", desc: "Bài học kinh doanh và cuộc sống từ lòng tốt." },
  { title: "Tỷ Phú Bán Giày", author: "Tony Hsieh", category: "Kinh doanh", price: 125000, sale: 15, img: "../images/book21.jpg", desc: "Câu chuyện khởi nghiệp truyền cảm hứng của nhà sáng lập Zappos." },
  { title: "Nhà Đầu Tư Thông Minh", author: "Benjamin Graham", category: "Kinh tế", price: 230000, sale: 10, img: "../images/book22.jpg", desc: "Sách gối đầu giường của mọi nhà đầu tư chứng khoán." },
  { title: "Quốc Gia Khởi Nghiệp", author: "Dan Senor & Saul Singer", category: "Kinh doanh", price: 180000, sale: 20, img: "../images/book23.jpg", desc: "Khám phá bí quyết thành công của Israel – quốc gia khởi nghiệp." },

  // ===== Tâm lý / Triết học =====
  { title: "Sức Mạnh Của Thói Quen", author: "Charles Duhigg", category: "Tâm lý học", price: 165000, sale: 15, img: "../images/book24.jpg", desc: "Làm chủ thói quen để thay đổi cuộc sống." },
  { title: "Tâm Lý Học Tội Phạm", author: "Stanton E. Samenow", category: "Tâm lý học", price: 120000, sale: 10, img: "../images/book4.jpg", desc: "Khám phá tư duy của tội phạm và hành vi con người." },
  { title: "Đánh Thức Con Người Phi Thường Trong Bạn", author: "Tony Robbins", category: "Phát triển bản thân", price: 175000, sale: 20, img: "../images/book25.jpg", desc: "Tạo động lực sống và làm chủ cuộc đời." },
  { title: "Sức Mạnh Của Hiện Tại", author: "Eckhart Tolle", category: "Tâm linh", price: 135000, sale: 10, img: "../images/book26.jpg", desc: "Tìm thấy bình an trong giây phút hiện tại." },
  { title: "Bước Chậm Lại Giữa Thế Gian Vội Vã", author: "Hae Min", category: "Triết lý sống", price: 110000, sale: 15, img: "../images/book27.jpg", desc: "Những suy ngẫm sâu sắc giúp sống an nhiên hơn." },

  // ===== Thiếu nhi / Giáo dục =====
  { title: "Dế Mèn Phiêu Lưu Ký", author: "Tô Hoài", category: "Thiếu nhi", price: 65000, sale: 10, img: "../images/thieunhi1.jpg", desc: "Hành trình phiêu lưu đầy thú vị của Dế Mèn." },
  { title: "Không Gia Đình", author: "Hector Malot", category: "Thiếu nhi", price: 115000, sale: 10, img: "../images/thieunhi2.jpg", desc: "Hành trình đầy nghị lực và cảm xúc của Rémi." },
  { title: "Chú Bé Mang Pyjama Sọc", author: "John Boyne", category: "Thiếu nhi", price: 95000, sale: 20, img: "../images/thieunhi3.jpg", desc: "Câu chuyện cảm động về tình bạn vượt qua chiến tranh." },
  { title: "Totto-chan Bên Cửa Sổ", author: "Tetsuko Kuroyanagi", category: "Thiếu nhi", price: 98000, sale: 10, img: "../images/thieunhi4.jpg", desc: "Một thế giới trẻ thơ hồn nhiên và giáo dục nhân văn." }
];


    // ================== HÀM HIỂN THỊ SÁCH ==================
function renderSachBanChay(listId, bookData) {
  const list = document.getElementById(listId);
  list.innerHTML = "";

  bookData.forEach(book => {
    const originalPrice = parseInt(String(book.price).replace(/[^\d]/g, ""));
    const salePercent = Number(book.sale) || 0;
    const salePrice = salePercent > 0 ? Math.round(originalPrice * (1 - salePercent / 100)) : originalPrice;

    const div = document.createElement("div");
    div.classList.add("book");

    div.innerHTML = `
      <div class="book-img-container">
        <img src="${book.img}" alt="${book.title}">
        ${salePercent > 0 ? `<div class="sale-tag">-${salePercent}%</div>` : ""}
      </div>
      <h4>${book.title}</h4>
      <p class="author">${book.author}</p>
      <div class="book-price">
        ${salePercent > 0
          ? `<span class="old-price">${originalPrice.toLocaleString()}₫</span>
             <span class="new-price">${salePrice.toLocaleString()}₫</span>`
          : `<span class="new-price">${originalPrice.toLocaleString()}₫</span>`}
      </div>
      <div class="book-actions">
        <button class="view"><i class="fa-solid fa-eye"></i> Xem thông tin</button>
        <button class="add"><i class="fa-solid fa-cart-plus"></i> Thêm</button>
      </div>
    `;

    // Sự kiện nút
    div.querySelector(".view").addEventListener("click", () => {
      localStorage.setItem("selectedBook", JSON.stringify(book));
      window.location.href = "book-detail.html";
    });

     // Thêm giỏ hàng
    div.querySelector(".add").addEventListener("click", () => {
      alert(`Bạn cần phải đăng nhập`);
      window.location.href = "login.html";
    });

    list.appendChild(div);
  });
}
// ===== CẤU HÌNH PHÂN TRANG =====
const itemsPerPage = 12;
let currentPage = 1;
let currentData = [...SachBanChay]; // Dữ liệu hiện tại (có thể bị filter)


// ================== HÀM TÌM KIẾM ==================
function searchSachBanChay() {
  const keyword = document.getElementById("search-input").value.toLowerCase();
  const filtered = SachBanChay.filter(book =>
    book.title.toLowerCase().includes(keyword) ||
    book.author.toLowerCase().includes(keyword)
  );
  renderSachBanChay("book-list", filtered);
}

// ================== GẮN SỰ KIỆN CHO CẢ 2 THANH TÌM KIẾM ==================
document.addEventListener("DOMContentLoaded", () => {
  renderSachBanChay("book-list", SachBanChay);

  // Hàm setup tìm kiếm dùng cho cả header và mini-header
  function setupSearch(inputId, btnId) {
    const input = document.getElementById(inputId);
    const btn = document.getElementById(btnId);
    if (!input || !btn) return;

    function doSearch() {
      const keyword = input.value.trim().toLowerCase();
      const filtered = SachBanChay.filter(book =>
        book.title.toLowerCase().includes(keyword) ||
        book.author.toLowerCase().includes(keyword)
      );
      renderSachBanChay("book-list", filtered);
    }

    btn.addEventListener("click", doSearch);
    input.addEventListener("keyup", doSearch);
  }

  setupSearch("search-input", "search-btn"); // header
  setupSearch("mini-search-input", "mini-search-btn"); // mini-header
});
  </script>
</body>
</html>
